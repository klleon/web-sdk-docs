---
id: get-started
sidebar_position: 3
title: Getting Started
sidebar_label: Getting Started
---

# Getting Started

## Prerequisites

Before using the Klleon Chat SDK, you need the following preparations:

1.  **Kleon Studio Account**: You need a [Kleon Studio](https://www.studio.klleon.io/) account to use SDK features. If you don't have an account, please sign up first.
2.  **SDK Key Issuance**: After domain registration, a unique `sdk_key` for use on that domain will be issued. This key is required for SDK initialization.

## Permissions

### AndroidManifest.xml

Add the required permissions to `AndroidManifest.xml`:

```xml
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

### Permission Handling in Code

```kotlin
class MainActivity : ComponentActivity() {
    private val requiredPermissions = arrayOf(
        Manifest.permission.RECORD_AUDIO
    )

    private val permissionLauncher = registerForActivityResult(
        ActivityResultContracts.RequestMultiplePermissions()
    ) { permissions ->
        handlePermissionResults(permissions)
    }

    private fun checkPermissions(): Boolean {
        return requiredPermissions.all { permission ->
            ContextCompat.checkSelfPermission(this, permission) == PackageManager.PERMISSION_GRANTED
        }
    }

    private fun requestPermissions() {
        val permissionsToRequest = requiredPermissions.filter { permission ->
            ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED
        }.toTypedArray()

        if (permissionsToRequest.isNotEmpty()) {
            permissionLauncher.launch(permissionsToRequest)
        }
    }

    private fun handlePermissionResults(permissions: Map<String, Boolean>) {
        val deniedPermissions = permissions.filter { !it.value }.keys

        if (deniedPermissions.isEmpty()) {
            Log.d("MainActivity", "All permissions granted")
            initializeApp()
        } else {
            Log.w("MainActivity", "Permissions denied: $deniedPermissions")
            // Handle denied permissions
        }
    }
}
```

## SDK Initialization

### Basic Setup

```kotlin
import io.klleon.ondevice.KlleonOndeviceSdk
import io.klleon.ondevice.render.KlleonSdkView

@RequiresApi(Build.VERSION_CODES.S)
class MainActivity : ComponentActivity() {
    private val klleonOndeviceSdk = KlleonOndeviceSdk()
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        if (checkPermissions()) {
            initializeApp()
        } else {
            requestPermissions()
        }
    }

    private fun initializeApp() {
        setContent {
            OndeviceSampleTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {
                    WorkerScreen(klleonOndeviceSdk = klleonOndeviceSdk)
                }
            }
        }

        copyAssetToCache("loop_sample.mp4")
        copyAssetToCache("loop_sample.npz")
    }


    private fun copyAssetToCache(fileName: String) {
        try {
            val assetManager = assets
            val inputStream = assetManager.open(fileName)
            val cacheFile = File(cacheDir, fileName)

            if (!cacheFile.exists()) {
                val outputStream = FileOutputStream(cacheFile)
                inputStream.copyTo(outputStream)
                outputStream.close()
                Log.d("MainActivity", "Copied $fileName to cache: ${cacheFile.absolutePath}")
            }
            inputStream.close()
        } catch (e: IOException) {
            Log.e("MainActivity", "Error copying asset $fileName", e)
        }
    }
}
```

## Next Steps

After completing the setup:

1. Check the [API Reference](api-reference) for available methods
2. Follow the [Guides](../guides/guides) for optimal integration
3. Check [Usage Examples](../examples/examples) for implementation patterns
