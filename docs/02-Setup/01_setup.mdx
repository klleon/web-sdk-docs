---
id: setup
sidebar_position: 2
title: setup
sidebar_label: setup
---

# 개요

Klleon Ondevice SDK는 비디오 처리, 실시간 메시징, WebSocket 통신과 함께 온디바이스 AI 기능을 제공하는 Android SDK입니다. 이 문서는 샘플 Android 애플리케이션의 구현을 기반으로 작성되었습니다.


# 설정

## 1) 요구사항
- **최소 SDK**: 26 (Android 8.0)
- **타겟 SDK**: 36
- **NDK 버전**: 28.2.13676358
---

### 1-1. 리소스
SDK에는 다음 에셋 파일이 필요합니다:
- 비디오 파일 (`loop_sample.mp4`)
- 얼굴 처리 파일 (`loop_sample.npz`)

이 파일들은 `assets`(`src/main/assets`) 폴더에 배치되어야 하며 런타임에 캐시 디렉토리로 복사됩니다.

### 1-2. AAR 파일

- Kleon SDK AAR 파일을 `app/libs`에 복사합니다.


## 2) Android 구성

```kotlin
android {
    compileSdk = 36
    ndkVersion = "27.0.12077973"
    
    defaultConfig {
        minSdk = 26
        targetSdk = 36
    }
    
    packaging {
        jniLibs {
            pickFirsts += "**/libc++_shared.so"
        }
    }
}
```

## 3) Gradle 구성
- 최상위 build.gradle(.kts) 파일에 New Relic 플러그인을 선언합니다
   ```
    plugins {
        // for binary Gradle plugins that need to be resolved
        id("com.newrelic.agent.android") version "7.6.1" apply false
    }
   ```
- 앱 레벨 build.gradle(.kts)에서 플러그인을 명시적으로 적용합니다
   ```
      plugins {
        id("com.newrelic.agent.android")
      }
   ```
- 앱 레벨 디렉토리에 newrelic.properties 파일을 추가합니다
    - [다운로드](https://drive.google.com/file/d/1w7efkin2__s76fI6a86gsEDbejsb-Ojy/view?usp=sharing)


- 앱 레벨 build.gradle(.kts)에 다음 내용을 추가합니다
    ```
      // Aar
      implementation(fileTree(mapOf("dir" to "libs", "include" to listOf("*.aar"))))

      // Coroutines
      implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:1.9.0")
      implementation("org.jetbrains.kotlinx:kotlinx-coroutines-android:1.9.0")

      // TensorFlow
      implementation("org.tensorflow:tensorflow-lite:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-gpu:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-gpu-delegate-plugin:0.4.4")
      implementation("org.tensorflow:tensorflow-lite-gpu-api:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-select-tf-ops:2.15.0")
      implementation("org.tensorflow:tensorflow-lite-metadata:0.4.4")
      implementation("org.tensorflow:tensorflow-lite-support:0.4.4")

      // OpenCV
      implementation("org.opencv:opencv:4.11.0")

      // PyTorch
      implementation("com.facebook.soloader:nativeloader:0.12.1")
      implementation("org.pytorch:pytorch_android_lite:2.1.0")

      // WebSocket
      implementation("com.squareup.okhttp3:okhttp:4.12.0")

      // Jackson
      implementation("com.fasterxml.jackson.core:jackson-databind:2.15.0")
      implementation("com.fasterxml.jackson.core:jackson-annotations:2.15.0")
      implementation("com.fasterxml.jackson.module:jackson-module-kotlin:2.15.0")
  
      // Newrelic
      implementation("com.newrelic.agent.android:android-agent:7.6.1")
    ```

{/* ## 샘플 앱 다운로드
- [다운로드] */}
